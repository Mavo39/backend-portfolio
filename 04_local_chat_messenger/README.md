# Local Chat Messenger

## 概要

このプログラムは、CLIで動作する CLI メッセージプログラムです。


## 背景・目的

このプログラムは学習サイト「RecursionCS」で出題された課題の1つです。  
Pythonのクライアント・サーバモデルの実装を通じて、UNIXドメインソケット・データの処理フローの理解を深めることを目的に取り組みました。 


## 実装機能

#### クライアント

- ユーザーからの入力受付(input)
- サーバーへ送信
- サーバーから受信したメッセージを出力

#### サーバー

- クライアントからのメッセージ受信
- Fakerライブラリを使って偽のユーザー名と住所を含むメッセージを生成
- 生成したメッセージをクライアントに送り返す


## 工夫した点

- `os.unlink()` を使用して、プログラムが予期せぬ終了をした場合でも、ソケットファイルが残らないようにしています

- with構文を使用して、ソケットの閉じ忘れによるエラーを防いでいます

- Faker インスタンスを while ループの外で一度だけ作成することで、コードの効率を改善しました
当初、Faker インスタンスを while ループ内で行なっていましたが、ループの都度インスタンス生成に伴うメモリ消費があるため、インスタンス生成を1度にしました。


## 今後の改善点

- 複数クライアントへの対応  
現在の実装は単一のクライアントとの通信のみを想定しています。今後は、複数のクライアントからの接続を同時に処理できるように拡張したいです。  

- ユーザー認証  
シンプルな認証を追加し、より現実的なチャットアプリケーションに近づけたいです。  

- 相対パスの改善  
現在はプロジェクトルートから実行するためにプログラムを書いています。  
どのディレクトリからでも実行できるように改善していきたいです。


## 実行方法

1. 仮想環境を構築

```sh
python3 -m venv venv
```

2. 仮想環境を有効化

```sh
source venv/bin/activate  # Mac/Linux
または
venv\Scripts\activate # Windows
```

3. 依存関係をインストール

```sh
pip install -r requirements.txt
```

4. サーバの起動

プロジェクトルートで以下のコマンドを実行

```sh
python3 src/server.py
```

5. 別のターミナルでクライアントの起動

プロジェクトルートで以下のコマンドを実行

```sh
python3 src/client.py
```

6. サーバを手動で終了

`Cntl` + `c` 押下


## 動作環境

Python 3.10以降


## その他
学習記録をQiitaにまとめています[Qiita記事はこちら](https://qiita.com/mabo23/items/5dfb0ae6af6bbdaf3486)